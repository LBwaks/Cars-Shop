{% extends 'base.html' %}
{% block title %} Vehicles {% endblock %}
{% block content %}
{% load static %}
{% load crispy_forms_tags %}
{% include 'includes/profile_message.html'%}

<section class="breadcrumbs">
    
  <div class="container">

    <div class="d-flex justify-content-between align-items-center">
      <h2>Delete Vehicle</h2>
      <ol>
        <li><a href="{% url 'home' %}">Home</a></li>
        <li>Delete</li>
      </ol>
    </div>

  </div>
</section><!-- Job breadcrumbs Section -->

    <section id="add_job" class="add_job " style="min-height:100vh;">
      <div class="container ">
     
             <div class="row">
     
               <div class="col-lg-8 col-md-8 mx-auto d-flex  justify-content-center ">
               <div class="card m-5 shadow-lg  bg-body rounded" style="width: 50rem;">
               <div class="card-header text-center">
        Make Payments
       </div> 
       {% comment %} <h5 class="card-header text-center py-4">Add Artist's Event</h5> {% endcomment %}
       <div class="card-body">
        <p> <span class="fs-6 fw-bold m-2">Vehicle :</span> <span class="text-warning fw-bold">{{car.category }} {{car.car_name}}</span></p>
     
        <p> <span class="fs-6 fw-bold m-2">Bid Price:</span> <span class="fw-light ml-3"> ksh {{bid.price }}</span></p>

    <div id="paypal-button-container"></div>
  </div>
</div>
</div>
</div>
</div>


</section>
    {% block scripts%}
    <script src="https://www.paypal.com/sdk/js?client-id=test&currency=USD"></script>
    <script>
        paypal.Buttons({
          // Sets up the transaction when a payment button is clicked
          
          //var pay = price/117;
          createOrder: (data, actions) => {
            return actions.order.create({
             
              purchase_units: [{
                amount: {
                  value: '{{bid.price}}' // Can also reference a variable or function
                }
              }]
            });
          },
          // Finalize the transaction after payer approveaderal
          onApprove: (data, actions) => {
            return actions.order.capture().then(function(orderData) {
              // Successful capture! For dev/demo purposes:
              console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
              const transaction = orderData.purchase_units[0].payments.captures[0];
              alert(`Transaction ${transaction.status}: ${transaction.id}\n\nSee console for all available details`);
              // When ready to go live, remove the alert and show a success message within this page. For example:
               const element = document.getElementById('paypal-button-container');
               element.innerHTML = `<div class="text-center"><a class="btn btn-success"  href="{% url 'finish_payments' bid.slug %}"> Click here to Finish Payments !</a></div>`;
              // Or go to another URL:  actions.redirect('thank_you.html');
            });
          }
        }).render('#paypal-button-container');
      </script>
    
    
      
    {% endblock %}
    
{% endblock %}